<!DOCTYPE html>
<html lang="es" data-theme="light" data-color-scheme="moderno" data-font-size="small">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#3b82f6">
    
    <title>{% block title %}{{ config.app_name | default('QueVendi.pro') }}{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" href="{{ url_for('static', path='img/favicon.ico') }}">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Base -->
    <link rel="stylesheet" href="{{ url_for('static', path='css/base/layout.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='css/base/header.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='css/base/toast.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='css/base/modal.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='css/base/loader.css') }}">
    
    <!-- CSS espec√≠fico de la p√°gina -->
    {% block css %}{% endblock %}
    
    <!-- PWA -->
    <link rel="manifest" href="{{ url_for('static', path='manifest.json') }}">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>
<body>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         HEADER
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <header class="header">
        <div class="header-left">
            <a href="/" class="header-logo">
                {% if store and store.logo_url %}
                    <img src="{{ store.logo_url }}" alt="{{ store.commercial_name }}" class="header-logo-img">
                {% else %}
                    <div class="header-logo-icon">{{ nicho_icon | default('üõí') }}</div>
                {% endif %}
                <span class="header-logo-text">{{ store.commercial_name | default(config.app_name) | default('QueVendi.pro') }}</span>
            </a>
        </div>
        
        <div class="header-center">
            <div class="header-status" id="connection-status">
                <span class="status-dot status-online"></span>
                <span class="status-text">Conectado</span>
            </div>
        </div>
        
        <div class="header-right">
            <!-- Theme Toggle -->
            <button class="header-btn theme-toggle" id="theme-toggle" title="Modo claro/oscuro">
                <span class="theme-icon-light">‚òÄÔ∏è</span>
                <span class="theme-icon-dark">üåô</span>
            </button>
            
            <!-- Settings -->
            <button class="header-btn" id="settings-btn" title="Preferencias">
                ‚öôÔ∏è
            </button>
            
            <!-- Notifications -->
            <button class="header-btn" id="notifications-btn" title="Notificaciones">
                üîî
                <span class="badge" style="display: none;">0</span>
            </button>
            
            <!-- User Menu -->
            <div class="header-user" id="user-menu">
                <div class="header-user-avatar">
                    {% if user and user.avatar_url %}
                        <img src="{{ user.avatar_url }}" alt="{{ user.full_name }}">
                    {% else %}
                        {{ user.full_name[:2] | upper if user else 'US' }}
                    {% endif %}
                </div>
                <div class="header-user-info">
                    <span class="header-user-name">{{ user.full_name | default('Usuario') }}</span>
                    <span class="header-user-role">{{ user.role | default('Vendedor') | title }}</span>
                </div>
                <span class="dropdown-arrow">‚ñº</span>
                
                <div class="header-dropdown">
                    <a href="/perfil" class="dropdown-item">üë§ Mi Perfil</a>
                    <a href="/config" class="dropdown-item">‚öôÔ∏è Configuraci√≥n</a>
                    <a href="/reportes" class="dropdown-item">üìä Reportes</a>
                    <div class="dropdown-divider"></div>
                    <a href="/logout" class="dropdown-item dropdown-item-danger">üö™ Cerrar Sesi√≥n</a>
                </div>
            </div>
        </div>
    </header>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         SETTINGS PANEL
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="settings-overlay" id="settings-overlay"></div>
    <div class="settings-panel" id="settings-panel">
        <div class="settings-header">
            <span class="settings-title">‚öôÔ∏è Preferencias</span>
            <button class="modal-close" id="settings-close">√ó</button>
        </div>
        <div class="settings-body">
            
            <!-- Esquema de colores -->
            <div class="settings-section">
                <div class="settings-section-title">Esquema de Colores</div>
                <div class="color-schemes">
                    <button class="color-scheme-btn color-scheme-moderno active" 
                            onclick="Settings.setColorScheme('moderno')" 
                            title="Moderno (Azul/Verde)"></button>
                    <button class="color-scheme-btn color-scheme-calido" 
                            onclick="Settings.setColorScheme('calido')" 
                            title="C√°lido (Naranja/Rojo)"></button>
                    <button class="color-scheme-btn color-scheme-elegante" 
                            onclick="Settings.setColorScheme('elegante')" 
                            title="Elegante (P√∫rpura/Rosa)"></button>
                </div>
            </div>
            
            <!-- Tama√±o de texto -->
            <div class="settings-section">
                <div class="settings-section-title">Tama√±o de Texto</div>
                <div class="font-size-btns">
                    <button class="font-size-btn active" data-size="small" onclick="Settings.setFontSize('small')">Peque√±o</button>
                    <button class="font-size-btn" data-size="medium" onclick="Settings.setFontSize('medium')">Mediano</button>
                    <button class="font-size-btn" data-size="large" onclick="Settings.setFontSize('large')">Grande</button>
                </div>
            </div>
            
            <!-- Posici√≥n de notificaciones -->
            <div class="settings-section">
                <div class="settings-section-title">Posici√≥n de Notificaciones</div>
                <div class="toast-position-grid">
                    <button class="toast-pos-btn active" data-position="top-right" onclick="Settings.setToastPosition('top-right')">‚ÜóÔ∏è Arr-Der</button>
                    <button class="toast-pos-btn" data-position="top-center" onclick="Settings.setToastPosition('top-center')">‚¨ÜÔ∏è Arr-Centro</button>
                    <button class="toast-pos-btn" data-position="bottom-right" onclick="Settings.setToastPosition('bottom-right')">‚ÜòÔ∏è Abj-Der</button>
                    <button class="toast-pos-btn" data-position="bottom-center" onclick="Settings.setToastPosition('bottom-center')">‚¨áÔ∏è Abj-Centro</button>
                </div>
            </div>
            
            <!-- Tema -->
            <div class="settings-section">
                <div class="settings-section-title">Tema</div>
                <div class="settings-option">
                    <span class="settings-option-label">Modo oscuro</span>
                    <label class="form-check" style="margin: 0;">
                        <input type="checkbox" id="dark-mode-toggle" onchange="Settings.toggleDarkMode()">
                    </label>
                </div>
            </div>
            
        </div>
    </div>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         MAIN CONTENT
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         TOAST CONTAINER
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="toast-container" class="toast-container toast-top-right"></div>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         LOADER OVERLAY
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="loader-overlay" id="loader-overlay">
        <div class="loader-icon" id="loader-icon">{{ nicho_icon | default('üõí') }}</div>
        <div class="loader-text">Cargando...</div>
    </div>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         AUDIO (Sonidos del sistema)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <audio id="sound-success" src="{{ url_for('static', path='sounds/success-finish-ui-sound.mp3') }}" preload="auto"></audio>
    <audio id="sound-error" src="{{ url_for('static', path='sounds/error-sound.mp3') }}" preload="auto"></audio>
    <audio id="sound-notification" src="{{ url_for('static', path='sounds/new-notification-sound.mp3') }}" preload="auto"></audio>
    <audio id="sound-click" src="{{ url_for('static', path='sounds/mouse-click-sound.mp3') }}" preload="auto"></audio>
    <audio id="sound-pop" src="{{ url_for('static', path='sounds/pop-sound.mp3') }}" preload="auto"></audio>
    <audio id="sound-swoosh" src="{{ url_for('static', path='sounds/swoosh-sound.mp3') }}" preload="auto"></audio>
    <audio id="sound-alert" src="{{ url_for('static', path='sounds/sirena.mp3') }}" preload="auto"></audio>
    <audio id="voice-confirm" src="{{ url_for('static', path='sounds/voice-confirm.mp3') }}" preload="auto"></audio>
    <audio id="voice-cancel" src="{{ url_for('static', path='sounds/voice-cancel.mp3') }}" preload="auto"></audio>
    <audio id="voice-error" src="{{ url_for('static', path='sounds/voice-error.mp3') }}" preload="auto"></audio>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         JAVASCRIPT BASE
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script src="{{ url_for('static', path='js/base/layout.js') }}"></script>
    <script src="{{ url_for('static', path='js/base/toast.js') }}"></script>
    <script src="{{ url_for('static', path='js/base/modal.js') }}"></script>
    <script src="{{ url_for('static', path='js/base/header.js') }}"></script>
    <script src="{{ url_for('static', path='js/base/loader.js') }}"></script>
    
    <!-- Variables globales para JS -->
    <script>
        window.APP_CONFIG = {
            nicho: '{{ store.business_type | default("bodega") }}',
            storeId: '{{ store.id | default("") }}',
            userId: '{{ user.id | default("") }}',
            apiUrl: '{{ config.api_url | default("/api/v1") }}'
        };
        
        // Establecer nicho en el Loader
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof Loader !== 'undefined') {
                Loader.setNicho(window.APP_CONFIG.nicho);
            }
        });
    </script>
    
    <!-- JS espec√≠fico de la p√°gina -->
    {% block js %}{% endblock %}
    
</body>
</html>